<!-- admin list -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>
    
    
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//javascript.phoenixrestorations.com/jquery.js"></script>
    <script src="//javascript.phoenixrestorations.com/jquery-ui.js"></script>
    
    <link rel="stylesheet" type="text/css" href="//css.phoenixrestorations.com/fonts/googlefonts.css" />
    <link rel="stylesheet" type="text/css" href="//css.phoenixrestorations.com/jquery-ui.min.css"/>
    <link rel="stylesheet" href="//css.phoenixrestorations.com/pagination.css">
    <link rel="stylesheet" href="//css.phoenixrestorations.com/dropdowns.css">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href="//css.phoenixrestorations.com/bootstrap/3.1.1-dist/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
#logo {
    float: left;
    width: 200px;
}
#search-box {
    width: 500px;
    float: left;
}
#user-info {
    float: left;
}
#lower {
    margin-top: 100px;
}
.container-fluid #feature-left {
	
}
.container-fluid #left-col {
	clear: both;
	padding: 10px;
        margin-top: 40px;
}

.container-fluid #left-col ul li {
    list-style: none;
    margin-top: 5px;
}
.container-fluid #left-col ul li span.fa{
    float: left;
}
.container-fluid #left-col ul li .btn {
    width: 110px;
}

.container-fluid #feature-right {
	
	padding: 10px;
}
.container-fluid #right-col {
	
}

.feature-slider {
	position:absolute;
        /* set it to 10px to offset other div's padding */
	right: 10px;
        background-color: white;
        display:none;
        border: solid 1px grey;
        border-radius: 5px;
}

form {
    margin-right: 20px;
}


        //radio buttons
        #feedback { font-size: 1.4em; }
        .selectable .ui-selecting { background: #FECA40; }
        .selectable .ui-selected { background: #F39814; color: white; }
        .selectable { list-style-type: none; margin: 0; padding: 0;  }
        .selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; width: 45%;}
        .selectable label {
            width: 45%;
        }
    </style>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  
  
  
  <script language="javascript">
    
    $(document).ready(function() {
       
       $('#set-homepage').click(function() {
           $.post('/admin/staff/homepage', function(data) {
               
           })
       });
    });
    
    </script>
</head>
  <body>
    <div class="container-fluid">
      
        <nav class="navbar navbar-inverse navbar-fixed-top">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar">qwe</span>
                <span class="icon-bar">qwe</span>
                <span class="icon-bar">qwe</span>
              </button>
                <div id="logo"></div>
              <a class="navbar-brand" href="#">iRestore</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav navbar-right">            
                <li>            
                <link href="/css/components/cssmenu/styles.css" rel="stylesheet">














<div id="ceilingbar">
    
<div style="display: none" id="dialog" title="Select Language">
    <ul>
    <li class="select-locale" data-id="en_US">English</li><li class="select-locale" data-id="zh_CN">Chinese - Simplified</li><li class="select-locale" data-id="hi_IN">Hindi</li><li class="select-locale" data-id="fr_CA">French</li>    </ul>
    <form method="post" action="/locale/change" id="locale-change">
        <input type="hidden" name="locale" id="locale" />
    <input type="hidden" name="FORM_SECURITY_TOKEN" value="$1$WXioxs5N$nuVWg1d1itGMjlQERaMbS." />
</form>
  </div>
<!--
   <div id="locales">
         
           <a class="select-locale" data-id="en_US">EN</a> 
           <a class="select-locale" data-id="zh_CN">&#20013;&#25991;</a>
           <a class="select-locale" data-id="hi_IN">Hindi</a>
        </div>
-->

    <div id='cssmenu'>
        
     
        <ul>
            <li class='active'><a href="#">Home</a></li>
            <li class='active'><a href="#">Status</a></li>
            <li class='active'><a href="#">Profile</a></li>
            <li class='active'><a href="#">Help</a></li>
            <li class='active'><a href="#"><span class="glyphicon glyphicon-bell"></span></a></li>
            <li class='active'><a href="#"><span class="glyphicon glyphicon-bell"></span></a></li>
            <li class='has-sub'><a href='#'>Quick</a>
                <ul>                            
                                <li class='active'><a href='/admin/home'><span>Home</span></a></li>
                                <li class='active'><a href='/super/home'><span>SUPER_USER_HOME</span></a></li>
                                <li class='active'><a href='/admin/contact/0/20'><span>ADMIN_CONTACTUS</span></a></li>
                                <li class='has-sub'><a href='#'><span>Staff</span></a>
                        <ul>
                                                             <li><a href='/admin/staff/0/20'><span>Staff</span></a></li>
                                                             <li><a href='/admin/staff/0'><span>ADMIN_STAFF_ADD_NEW</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='has-sub'><a href='/admin/scoping/requests/0/20'><span>Scoping</span></a>
                        <ul>
                                                             <li><a href='/admin/scoping/requests/0/20'><span>ADMIN_SCOPING_LIST_ALL</span></a></li>
                                                             <li><a href='/admin/scoping/takeoffs/0/20'><span>ADMIN_SCOPING_TAKEOFFS_LIST_ALL</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='has-sub'><a href='/admin/claims/0/20'><span>Claims</span></a>
                        <ul>
                                                             <li><a href='/admin/claims/0/20'><span>ADMIN_CLAIMS_LIST_ALL</span></a></li>
                                                             <li><a href='/admin/claim/1/0'><span>ADMIN_CLAIMS_CREATE_NEW</span></a></li>
                                                             <li><a href='/admin/claims/scheduling/0/20'><span>ADMIN_CLAIMS_SCHEDULING</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='active'><a href='/admin/contents/jobs/0/20'><span>Contents</span></a></li>
                                <li class='active'><a href='/admin/samples/0/20'><span>Samples</span></a></li>
                                <li class='has-sub'><a href='/admin/contacts/0/20'><span>Contacts</span></a>
                        <ul>
                                                             <li><a href='/admin/contacts/0/20'><span>ADMIN_CONTACTS_LIST_ALL</span></a></li>
                                                             <li><a href='/admin/contacts/0'><span>ADMIN_CONTACTS_ADD_NEW</span></a></li>
                                                             <li><a href='/admin/companies/0/20'><span>ADMIN_COMPANIES_LIST_ALL</span></a></li>
                                                             <li><a href='/admin/companies/0'><span>ADMIN_COMPANIES_ADD_NEW</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='has-sub'><a href='#'><span>Inventory</span></a>
                        <ul>
                                                             <li><a href='/admin/inventory/materials/0/20'><span>ADMIN_INVENTORY_MATERIALS</span></a></li>
                                                             <li><a href='/admin/inventory/equipment/0/20'><span>ADMIN_INVENTORY_EQUIPMENT</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='active'><a href='/admin/keys/0/20'><span>Keys</span></a></li>
                                <li class='active'><a href='/admin/notifications/0/20'><span>Notifications</span></a></li>
                                <li class='active'><a href='/admin/messaging/0/20'><span>Messaging</span></a></li>
                                <li class='active'><a href='/admin/satisfaction'><span>Satisfaction</span></a></li>
                                <li class='active'><a href='/admin/callmatrix/0/14'><span>Call Matrix</span></a></li>
                                <li class='active'><a href='/admin/deficiencies/0/20'><span>Deficiencies</span></a></li>
                                <li class='active'><a href='/admin/subcontractors/0/20'><span>SubContractors</span></a></li>
                                <li class='active'><a href='/admin/accounting'><span>Accounting</span></a></li>
                                <li class='active'><a href='/admin/workperformed/0/20'><span>Work Actions</span></a></li>
                                <li class='active'><a href='/admin/environmental/0/20'><span>Environmental</span></a></li>
                                <li class='has-sub'><a href='/admin/cms/pages/0/20'><span>Website</span></a>
                        <ul>
                                                             <li><a href='/admin/cms/pages/0/20'><span>List All Pages</span></a></li>
                                                             <li><a href='/admin/cms/pages/0'><span>Add New Page</span></a></li>
                                                             <li><a href='/admin/cms/sections/0/20'><span>List All Sections</span></a></li>
                                                             <li><a href='/admin/cms/blogs/0/20'><span>List All Blogs</span></a></li>
                                                             <li><a href='/admin/cms/blogs/0'><span>Add New Blog</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='has-sub'><a href='/admin/projects/0/20'><span>Building Addresses</span></a>
                        <ul>
                                                             <li><a href='/admin/projects/0/20'><span>ADMIN_PROJECTS_LIST_ALL</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='active'><a href='/admin/incidents/0/20'><span>ADMIN_INCIDENTS</span></a></li>
                                <li class='has-sub'><a href='/admin/surveys/0/20'><span>ADMIN_SURVEYS</span></a>
                        <ul>
                                                             <li><a href='/admin/surveys/0/20'><span>ADMIN_SURVEYS_LIST_ALL</span></a></li>
                                                             <li><a href='/admin/surveys/pages/0/20'><span>ADMIN_SURVEYS_LIST_ALL_PAGES</span></a></li>
                                                             <li><a href='/admin/surveys/panes/0/20'><span>ADMIN_SURVEYS_LIST_ALL_PANES</span></a></li>
                                                             <li><a href='/admin/surveys/questions/list/0/20'><span>ADMIN_SURVEYS_LIST_ALL_QUESTIONS</span></a></li>
                                                             <li><a href='/admin/surveys/answers/list/0/20'><span>ADMIN_SURVEYS_LIST_ALL_ANSWERS</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='has-sub'><a href='/admin/events/0/20'><span>ADMIN_EVENTS</span></a>
                        <ul>
                                                             <li><a href='/admin/events/0/20'><span>ADMIN_EVENTS_LIST_ALL</span></a></li>
                                                             <li><a href='/admin/events/locations/0/20'><span>ADMIN_EVENTS_LIST_ALL_LOCATIONS</span></a></li>
                                                             <li><a href='/admin/events/eventcontacts/0/20'><span>ADMIN_EVENTS_LIST_ALL_CONTACTS</span></a></li>
                                                             <li><a href='/admin/events/eventprospects/0/20'><span>ADMIN_EVENTS_LIST_ALL_PROSPECTS</span></a></li>
                                                    </ul>                    
                    </li>
                    
                                <li class='active'><a href='/admin/cart/sales/0/20'><span>ADMIN_CART</span></a></li>
              
                </ul>
            </li>
        </ul>
    </div>
</div>

<script language="javascript" src="/js/components/cssmenu/script.js"></script>
                </li>
                <li><a href="#" id="set-homepage" title="set as homepage"><span class="glyphicon glyphicon-star"></span></a></li>
              </ul>
              <form class="navbar-form">
                <input type="text" class="form-control" placeholder="Search..." id="search-box">
              <input type="hidden" name="FORM_SECURITY_TOKEN" value="$1$ZrffUxPH$JC59BbYwW5b.KgfcJQdxY0" />
</form>
            </div>
          </div>
        </nav>
        <div id="lower">
            <div class="col-lg-1" id="left-col">
                <p></p>
        	<ul>
                <li>
                    <button onclick="document.location.href='/admin/claims/0/20'" type="button" class="btn btn-default" aria-label="Left Align">
                       <span class="fa fa-folder-open" aria-hidden="true"> Jobs</span>
                    </button>
                </li>
                <li>
                    <button onclick="document.location.href='/admin/documents/0/20'" type="button" class="btn btn-default" aria-label="Left Align">
                       <span class="fa fa-file-text" aria-hidden="true"> Documents</span>
                    </button>
                </li>
                <li>
                    <button onclick="document.location.href='/admin/staff/0/20'" type="button" class="btn btn-default" aria-label="Left Align">
                       <span class="fa fa-rocket" aria-hidden="true"> Staff</span>
                    </button>
                </li>
                <li>
                    <button onclick="document.location.href='/admin/clients/0/20'" type="button" class="btn btn-default" aria-label="Left Align">
                       <span class="fa fa-users" aria-hidden="true"> Clients</span>
                    </button>
                
                </li>
                <li>
                    <button onclick="document.location.href='/admin/companies/0/20'" type="button" class="btn btn-default" aria-label="Left Align">
                       <span class="fa fa-university" aria-hidden="true"> Companies</span>
                    </button>
                </li>
                <li>                    
                    <button onclick="document.location.href='/admin/projects/0/20'" type="button" class="btn btn-default" aria-label="Left Align">
                       <span class="fa fa-building" aria-hidden="true"> Addresses</span>
                    </button>
                </li>
                <li>                
                    <button onclick="document.location.href='/admin/tickets/0/20'" type="button" class="btn btn-default" aria-label="Left Align">
                       <span class="fa fa-ticket" aria-hidden="true"> Tickets</span>
                    </button>
                </li>
                <li>
                <button type="button" class="btn btn-default" aria-label="Left Align">
                    <span class="fa fa-child" aria-hidden="true"> Customers</span>
                </button>
                </li>
                <li>
                <button onclick="document.location.href='/admin/scheduling/calendar/0/20'" type="button" class="btn btn-default" aria-label="Left Align">
                    <span class="fa fa-calendar" aria-hidden="true"> Schedule</span>
                </button>
                </li>
            </ul>
        </div>
            <div class="col-lg-6" id="feature-left">
                   
                
                
                
      <style>
    
.edit-nav {
    position: absolute;
    background-color: white;
    border: solid 1px grey;
    padding: 10px;
    border-radius: 5px;
    display: none;
    z-index: 1000
}
.edit-nav li {
    list-style: none;
}
.hover, .hover_effect {
    position: absolute;
    background-color: white;
    border: solid 1px grey;
    padding: 10px;
    border-radius: 5px;
    display:block;
    z-index: 1000
}

element:hover, element:active {
-webkit-tap-highlight-color: rgba(0,0,0,0);
-webkit-user-select: none;
-webkit-touch-callout: none
}

</style>
<script language="javascript">

  $(document).ready(function() {

    var currentStatus = '';
    //$('body').bind('touchstart', function() {});
    document.addEventListener("touchstart", function(){}, true);
    
    $('.hover').bind('touchstart touchend', function(e) {
        e.preventDefault();
        $(this).toggleClass('hover_effect');
    });
    
    $('.permissions').click(function(e) {
        e.stopPropagation(); 
        window.location = '/admin/staff/permissions/' + $(this).data('id');       
    });
    
    $('.status').click(function(e) {
         e.stopPropagation(); 
         $(this).prev('.staffStatus').toggle();
         if($(this).text() == 'cancel') {
            $(this).text(currentStatus);
         } else {
            currentStatus = $(this).prev('.staffStatus').val();
            $(this).text('cancel');
         }
         
    });
    
//    $('.staffStatus').click(function(e) {
//         e.stopPropagation();        
//         $(this).prev().toggle();
//         $(this).toggle();
//    });
//    
    $('.staffStatus').change(function() {
        
         if($(this).val() != currentStatus && confirm("are you sure you want to change the status of this employee?")) {
            alert('this will eventually perform a save'); //save();
            $(this).next().text($(this).val());
         } else {
            $(this).next().text(currentStatus); 
         } 
                 
         $(this).toggle();
    });
    
    $('.edit').click(function() {
       $('#company-form').trigger('reset');
       $.get('/admin/companies/view/' + $(this).data('id'), function(data) {
           $('#left-feature-slider-edit').toggle('true');
           $.each(data, function(key, value) {
               $('#Company_'+key).val(value);
           });
           $('#Company_companyId').val(data.id);
       })               
    });
    
    $('.editCompany').click(function(e) {
        e.stopPropagation();        
        window.location = '/admin/companies/' + $(this).data('id');                
    });
    
    $('.edit-container').hover(
        function() {
            $(this).children('.edit-nav').toggleClass('hover_effect', true);
        },
        function() {
            $(this).children('.edit-nav').toggleClass('hover_effect', false);
        }
    );
    $('.edit-container').click(
        function() {
            $(this).children('.edit-nav').toggleClass('hover_effect');
        },
        function() {
            $(this).children('.edit-nav').toggleClass('hover-effect');
        }
    );
    
});
</script>           
                
                
                
                
             

  <div class="container">
    
<div class="panel panel-default">
    <div class="panel-heading">
        <a style="float: right;" href="#/new" data-id="0" class="edit">Create New Company</a>
        Company List
    </div>
    <div class="page"></div>
   
    </div>
    <div>

        <ul class="pagination">
            <li>
                <a data-limit="20" data-offset="0" data-url="/admin/staff" class="pagination current">«</a>
            </li> 
            <li>
                <a data-limit="20" data-offset="0" data-url="/admin/staff" class="pagination current">1</a>
            </li> 
            <li><a data-limit="20" data-offset="0" data-url="/admin/staff" class="pagination current">»</a>
            </li>
        </ul>
    </div>
  </div>

                
                
                
                
                
                
                
                
                
                
            </div>
            <div class="col-lg-4" id="feature-right">

                <h3>Feeds</h3>

                <div class="feed">                
                    <link href="/css/components/ticker/ticker.css" rel="stylesheet">









<input type="hidden" id="ticker-token" value="$1$afUqnEmV$GThoiJnevw6xnbZqifTKS0" >
<div class="panel panel-default">
    <div class="panel-heading">
       Work Activity Updates
    </div>
    <div class="chat_wrapper">
        <div id="message_box" class="message_box">

        </div>
        <div class="panel">       
            <a href="#" id="history" class="ui-link">view more results</a>        
        </div>
    </div>
</div>

<script language="javascript" src="/js/components/ticker/ticker.js"></script>
                </div>
                <div class="feed">
                    <!-- css start 
@components/twitter/includes/css/traffic.css
<!-- css end --->

<style>
    #twitter-traffic-feed .row {
        padding: 0px 20px 10px 30px;
    }
    
    #twitter-traffic-feed .row .subject{
        font-family: Verdana, Geneva, sans-serif;
        font-size: 11px;
        *font-weight: 600;
        color: #666;
    }
    
    #twitter-traffic-feed .row .date{
        text-align: left;
        font-size: 10px;
        font-family: Verdana, Geneva, sans-serif;
        margin-right: 60px;
        width: 50px;
        float: right;
    }
</style>

<div id='twitter-traffic-feed'>
    <div class="panel panel-default">
        <div class="panel-heading">
           Traffic Updates
        </div>
            <div class="row">
                <div class="date">May 15 <br>10:22AM</div>
                <div class="subject">RT @DriveBC: New Rule Of The Road: When Keeping Left Is Not Always Right  ~ via @TranBC http://t.co/IJngQuzDsG http://t.co/VuHQuyfOeP</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>10:06AM</div>
                <div class="subject">An accident on the #KnightStBridge southbound mid-span in the right lane ^jj</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>09:54AM</div>
                <div class="subject">RT @LangleyCityFire: #Langley City Fire on scene with a commercial structure fire 20090 Logan Ave. 2nd alarm struck http://t.co/voVbAZyczt</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>09:47AM</div>
                <div class="subject">Good news in #Coquitlam as crews just cleared up the crash from #BCHWY1 westbound by Brunette. Still busy though from the #CapeHorn.^ms</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>09:47AM</div>
                <div class="subject">RT @VSAMaintenance: #BCHwy5#Coquihalla grinding/re-surfacing completed #Merritt Exit286 to  Comstock exit276, ready for the long weekend. h…</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>09:47AM</div>
                <div class="subject">RT @emadagahi: @AM730Traffic large piece of debris on Hwy 1 eastbound HOV Lane/ just east of the Kensington overpass.</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>09:35AM</div>
                <div class="subject">RT@STuuFo http://t.co/zSuvO29wqO</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>09:34AM</div>
                <div class="subject">Structure fire in #Langley at 200th St. and Industrial(between Logan and Fraser Hwy).^ms</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>08:34AM</div>
                <div class="subject">An accident in #Coquitlam westbound on #BCHWY1 at the Brunette overpass in the right lane ^jj</div>
        </div>
            <div class="row">
                <div class="date">May 15 <br>08:22AM</div>
                <div class="subject">An accident at the #Coquitlam/#Burnaby border at the NorthRd./Broadway intersection. Traffic is blocked northbound and eastbound ^jj</div>
        </div>
    
    </div>
</div>

                </div>
            </div>
            <div class="col-lg-1" id="right-col">
                    this is right col<br>
    this is right col<br>
    vthis is right col<br>
    this is right col<br>

            </div>
            
            <div class="col-lg-5 feature-slider" id="left-feature-slider" >
            <!---featureslider--->
            </div>
            
            <div class="col-lg-5 feature-slider" id="left-feature-slider-edit">
            <!---featureslider-edit--->
            <div class="container">
                <div class="editcompany"></div>
            </div>
            
            </div>
            <div class="col-lg-5 feature-slider" id="left-feature-slider-edit1">
            <!---featureslider-edit1--->
            </div>
            
            <div class="col-lg-5 feature-slider" id="left-feature-slider-edit2">
            <!---featureslider-edit2--->
            </div>
            
            <div class="col-lg-5 feature-slider" id="left-feature-slider-edit3">
            <!---featureslider-edit3--->
            </div>
            
            <div class="col-lg-5 feature-slider" id="left-feature-slider-edit4">
            <!---featureslider-edit4--->
            </div>
            <div class="col-lg-5 feature-slider" id="left-feature-slider-edit5">
            <!---featureslider-edit5--->
            </div>
            
        </div>
    </div>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="//javascript.phoenixrestorations.com/bootstrap.min.js"></script>
    
    <style>
        .col-xs-10.col-s-3.col-md-3.staff-member.tr {
           
            width: 100%;
            border: solid 1px;
          }
          
          .container {
            width: 100%;
          }
          
          .dropdown ul ul {
            display: none;
          }
 
          
          .tr .name, .tr .title, .tr .department, .tr .telephone {
              width: 20%;
          }
          .tr .mobile {
              width: 20%
          }
          .tr .email {
              width: 40%;
          }
          
    </style>
    

  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>

  <script type="text/template" id="companies-list-template">
   

        <table class="table table-striped table-hover selectable-rows">
            <tr>
                <th align="center">Company</th> 
                <th width="11%" align="center">Type</th>              
                <th width="11%" align="center">Address</th>
                <th align="center">Telephone</th>
                <th  align="center">Fax</th>
                <th  align="center">Url</th>
                <th  align="center"></th>
            </tr>
           
         
        <% _.each(companies, function(company) { %>
            <tr data-type="editable" valign="top" data-id="<%= company.id %>">
                <td><%= company.get('name') %></td>
                <td><%= company.get('CompanyTypes_id') %></td>
                <td><%= company.get('address1') %>, <%= company.get('city') %>, <%= company.get('postalCode')%></td>
                <td><%= company.get('telephone') %></td>
                <td><%= company.get('fax') %></td>
                <td><%= company.get('url') %></td>
                <td>
                    <div class="edit-container"><span class="glyphicon glyphicon-cog"></span>
                        <ul class="edit-nav">
                            <li><a href="#" data-id="<%= company.id %>" class="edit">Edit</a></li>
                            <li><a href="#" data-id="<%= company.id %>" class="permissions">Permissions</a</li> 
                            <li><a href="#" data-id="<%= company.id %>" class="deleteCompany">Company</a</li> 
                        </ul>
                    </div>
                </td>
            </tr>
    
        <% }); %>
      </tbody>
    </table>

  </script>
 <script type="text/template" id="edit-company-template">
    <form class="edit-company-form">
      <legend><%= company ? 'Edit' : 'New' %> Company</legend>
        <label>First Name</label>
        <input name="firstname" type="text" value="<%= company ? company.get('firstname') : '' %>">
        <label>Last Name</label>
        <input name="lastname" type="text" value="<%= company ? company.get('lastname') : '' %>">
        <label>Age</label>
        <input name="age" type="text" value="<%= company ? company.get('age') : '' %>">
        <hr />
       <button type="submit" class="btn"><%= company ? 'Update' : 'Create' %></button>
       <% if(company) { %>
        <input type="hidden" name="id" value="<%= company.id %>" />
       <button data-company-id="<%= company.id %>" class="btn btn-danger delete">Delete</button>
       <% }; %>
    </form>
  </script>

     
  <script>
    function htmlEncode(value){
      return $('<div/>').text(value).html();
    }
    $.fn.serializeObject = function() {
      var o = {};
      var a = this.serializeArray();
      $.each(a, function() {
          if (o[this.name] !== undefined) {
              if (!o[this.name].push) {
                  o[this.name] = [o[this.name]];
              }
              o[this.name].push(this.value || '');
          } else {
              o[this.name] = this.value || '';
          }
      });
      return o;
    };
    $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
      options.url = 'http://dev.phoenixrestorations.com' + options.url;
    });
    var Companies = Backbone.Collection.extend({
      url: '/admin/companies/rest/0/20'
    });
    var Company = Backbone.Model.extend({
      urlRoot: '/admin/companies/rest'
    });
    var CompanyListView = Backbone.View.extend({
      el: '.page',
      render: function () {
        var that = this;
        var companies = new Companies();
        companies.fetch({
          success: function (companies) {
            var template = _.template($('#companies-list-template').html(), {companies: companies.models});
            that.$el.html(template);
          }
        })
      }
    });
    var companyListView = new CompanyListView();
    var CompanyEditView = Backbone.View.extend({
      el: '.editcompany',
      events: {
        'submit .edit-company-form': 'saveCompany',
        'click .delete': 'deleteCompany'
      },
      saveCompany: function (ev) {
        var companyDetails = $(ev.currentTarget).serializeObject();
        var company = new Company();
        company.save(companyDetails, {
          success: function (company) {
            router.navigate('', {trigger:true});
          }
        });
        return false;
      },
      deleteCompany: function (ev) {
        this.company.destroy({
          success: function () {
            console.log('destroyed');
            router.navigate('', {trigger:true});
          }
        });
        return false;
      },
      render: function (options) {
        var that = this;
        if(options.id) {
          that.company = new Company({id: options.id});
          that.company.fetch({
            success: function (company) {    
              var template = _.template($('#edit-company-template').html(), {company: company});
              that.$el.html(template);
            }
          })
        } else {
          var template = _.template($('#edit-company-template').html(), {company: null});
          that.$el.html(template);
        }
      }
    });
    var companyEditView = new CompanyEditView();
    var Router = Backbone.Router.extend({
        routes: {
          "": "home", 
          "edit/:id": "edit",
          "new": "edit",
        }
    });
    var router = new Router;
    router.on('route:home', function() {
      // render company list
      companyListView.render();
    })
    router.on('route:edit', function(id) {
      $('#left-feature-slider-edit').toggle(true);
      companyEditView.render({id: id});
    })
    Backbone.history.start();
  </script>
   
     
  </body>
</html>